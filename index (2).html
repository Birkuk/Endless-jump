<!DOCTYPE html>
<html>
<head>
  <title>Offline Runner Game 2.5D</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #121212;
      overflow: hidden;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      text-align: center;
      padding-top: 30px;
      color: #eee;
      transition: background 1s;
    }

    canvas {
      display: block;
      background: #1e1e1e;
      border: 4px solid #444;
      border-radius: 10px;
      margin: 0 auto;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.6);
      transition: border-color 1s, box-shadow 1s;
    }

    #restartBtn {
      display: none;
      background-color: #e91e63;
      color: white;
      border: none;
      border-radius: 5px;
      padding: 12px 24px;
      font-size: 16px;
      margin-top: 20px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    #restartBtn:hover {
      background-color: #c2185b;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="800" height="200"></canvas>
  <button id="restartBtn">Play Again</button>
  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const restartBtn = document.getElementById("restartBtn");

    let player = {
      x: 50,
      y: 150,
      radius: 20,
      vy: 0,
      gravity: 1.5,
      jumpStrength: -18,
      grounded: true,
      color: "#ff0000"
    };

    let holes = [];
    let coins = [];
    let score = 0;
    let gameOver = false;

    function drawPlayer() {
      ctx.save();
      ctx.translate(player.x + player.radius, player.y + player.radius);
      ctx.rotate(Date.now() / 200);
      const gradient = ctx.createRadialGradient(0, 0, 5, 0, 0, player.radius);
      gradient.addColorStop(0, '#fff');
      gradient.addColorStop(1, player.color);
      ctx.beginPath();
      ctx.arc(0, 0, player.radius, 0, Math.PI * 2);
      ctx.fillStyle = gradient;
      ctx.fill();
      ctx.restore();
      ctx.beginPath();
      ctx.ellipse(player.x + player.radius, player.y + player.radius * 2 + 4, player.radius * 0.8, 5, 0, 0, Math.PI * 2);
      ctx.fillStyle = 'rgba(0, 0, 0, 0.4)';
      ctx.fill();
    }

    function drawHoles() {
      holes.forEach(hole => {
        const grad = ctx.createLinearGradient(hole.x, hole.y, hole.x + hole.width, canvas.height);
        grad.addColorStop(0, '#111');
        grad.addColorStop(1, '#000');
        ctx.beginPath();
        ctx.moveTo(hole.x, hole.y);
        ctx.lineTo(hole.x + hole.width, hole.y);
        ctx.lineTo(hole.x + hole.width - 10, canvas.height);
        ctx.lineTo(hole.x + 10, canvas.height);
        ctx.closePath();
        ctx.fillStyle = grad;
        ctx.fill();
      });
    }

    function drawCoins() {
      coins.forEach(coin => {
        const grad = ctx.createRadialGradient(coin.x - 2, coin.y - 2, 2, coin.x, coin.y, 6);
        grad.addColorStop(0, '#fff8b0');
        grad.addColorStop(1, 'gold');
        ctx.beginPath();
        ctx.arc(coin.x, coin.y, 6, 0, Math.PI * 2);
        ctx.fillStyle = grad;
        ctx.fill();
      });
    }

    function updateHoles() {
  if (Math.random() < 0.007) {
    const width = 30 + Math.random() * 40;
    holes.push({ x: canvas.width, y: 190, width });
  }
  const speed = 6 + Math.floor(score / 100);
  holes.forEach(hole => hole.x -= speed);
      holes = holes.filter(hole => hole.x + hole.width > 0);
    }

    function updateCoins() {
  if (Math.random() < 0.01) {
    coins.push({ x: canvas.width, y: 140 });
  }
  const coinSpeed = 4 + Math.floor(score / 150);
  coins.forEach(coin => coin.x -= coinSpeed);
      coins = coins.filter(coin => coin.x > 0);
    }

    function detectCollision() {
      for (let hole of holes) {
        const inHoleX = player.x + player.radius * 2 > hole.x && player.x < hole.x + hole.width;
        const overHole = player.y + player.radius * 2 >= hole.y;
        if (inHoleX && overHole) {
          gameOver = true;
          restartBtn.style.display = "inline-block";
        }
      }
    }

    function collectCoins() {
      coins = coins.filter(coin => {
        const dx = player.x + player.radius - coin.x;
        const dy = player.y + player.radius - coin.y;
        const distance = Math.sqrt(dx * dx + dy * dy);
        if (distance < player.radius + 6) {
          score += 10;
          player.color = `hsl(${Math.random() * 360}, 100%, 50%)`;
          return false;
        }
        return true;
      });
    }

    function updatePlayer() {
      player.vy += player.gravity;
      player.y += player.vy;

      if (player.y >= 150) {
        player.y = 150;
        player.vy = 0;
        player.grounded = true;
      }
    }

    function drawScore() {
      ctx.fillStyle = "#fff";
      ctx.font = "20px Arial";
      ctx.fillText("Score: " + score, 10, 30);
    }

    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      const skyGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);
  skyGrad.addColorStop(0, '#6a0dad');
  skyGrad.addColorStop(1, '#3b0066');
      ctx.fillStyle = skyGrad;
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      drawPlayer();
      drawHoles();
      drawCoins();
      drawScore();

      updatePlayer();
      updateHoles();
      updateCoins();
      detectCollision();
      collectCoins();

      if (!gameOver) {
        score++;
        requestAnimationFrame(gameLoop);
      }
    }

    document.addEventListener("keydown", (e) => {
      if ((e.code === "Space" || e.code === "ArrowUp") && player.grounded) {
        player.vy = player.jumpStrength;
        player.grounded = false;
      }
    });

    restartBtn.addEventListener("click", () => {
      holes = [];
      coins = [];
      score = 0;
      gameOver = false;
      player.y = 150;
      player.color = "#ff0000";
      restartBtn.style.display = "none";
      gameLoop();
    });

    gameLoop();
  </script>
</body>
</html>
